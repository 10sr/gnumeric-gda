2000-05-28  ERDI Gergo  <cactus@cactus.rulez.org>

	* gtk-combo-stack.[ch]: Create the stack widget with a stock
	pixmap

	* gtk-combo-box.c (gtk_combo_box_set_arrow_sensitive): new method
	to make the dropdown button sensitive/unsensitive

2000-05-27  ERDI Gergo  <cactus@cactus.rulez.org>

	* gtk-combo-stack.[ch]: New widget to do nice Undo/Redo buttons
	with a dropdown list

2000-05-21  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (gtk_combo_text_destroy): Disconnect
	list_unselect_cb, otherwise we get warnings during list shutdown.
	(list_select_cb): Change it to handle list::select_child instead
	of listitem::select. Change signature accordingly.
	(list_select_cb): Invalidate cached state if selecting cached
	widget. 
	(list_unselect_cb): New callback. Handles unselect by re-selecting
	if list is visible. This makes it impossible to deselect
	interactively. 
	(cb_toggle): New callback. Handle <Ret> which by default toggles
	the list item, and make it select instead.
	(gtk_combo_text_add_item): Don't connect list_select_cb, that's
	now done in gtk_combo_text_construct. Connect cb_toggle.
	(gtk_combo_text_construct): Connect list_select_cb and
	list_unselect_cb.

2000-05-20  Jody Goldberg <jgoldberg@home.com>

        * Release 0.54

2000-05-19  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (cb_enter): To fix bug where mouseover
	highlight would never go away, only cache selected and normal
	states. 
	(cb_exit): Only restore state if cached state belongs to this
	widget. 

2000-05-18  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (cb_list_mapped): Do nothing if no selection.

2000-05-18  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (cb_list_mapped): New callback function. Sets
	focus to selected item, which also happens to make it visible.
	(gtk_combo_text_construct): Call
	gtk_container_set_focus_hadjustment - this enables autoscroll and 
	keyboard scrolling. Connect cb_list_mapped.

2000-05-15  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-box.h: Declare gtk_combo_box_set_display. It was
	declared global in gtk-combo-box.c - apparently on purpose.

	* gtk-combo-box.c: Make behaviour more like tearoff menus for
	consistency: Make it possible to popup the original combo while
	the tearoff menu is up.
	(deactivate_arrow): New function. Set arrow button visual to
	inactive. Code moved from gtk_combo_box_popup_hide_unconditional.
	(gtk_combo_box_popup_hide_unconditional): See above.
	(gtk_combo_box_popup_hide): Handle case where popup is hidden
	while tearoff menu is up.
	(gtk_combo_box_popup_display): Remove !torn_off assertion and
	handle torn_off case.
	(gtk_combo_popup_tear_off): Add set_position parameter, true if
	tearoff window wasn't already up. Queue a resize to fix confusion
	about size.
	(gtk_combo_set_tearoff_state): Deactivate arrow button when
	tearing off - because button now works as usual in torn off state.
	(gtk_combo_tearoff_bg_copy): Remove #if 0 around it. Make comment
	short and clear now that I understand what it's for. More info in
	comment at point it is called from. Use allocation geometry
	instead of requisition, in case tearoff window has been resized.
	(cb_tearable_button_release): Remove some unnecessary
	conditionals. Too much cut and paste?

2000-05-07  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-toolbar.c (gnumeric_toolbar_new) : Take an accel_group.
	(gnumeric_toolbar_construct) : Ditto.

2000-05-10  Jon K Hellan  <hellan@acm.org>

	* widget-font-selector.c (list_realized): Rename to
	list_mapped. List must be mapped before we can move to a list
	element. realized is not enough. See gtkclist.c:
	vadjustment_value_changed (ca l. 6147).
	(fs_fill_font_name_list, fs_fill_font_style_list,
	fs_fill_font_size_list): Replace realize signal and list_realized
	handler with map and list_mapped.

2000-05-09  Jody Goldberg <jgoldberg@home.com>

	* Release 0.53

2000-04-22  Almer. S. Tigelaar.  <almer1@dds.nl>

	* widget-editable-label.c : Added new event "editing_stopped", 
	this signal is emmited when the user presses "ESC" or presses
	the mouse button(s) outside the editable label. 

2000-04-09  Morten Welinder  <terra@diku.dk>

	* widget-font-selector.c (reload_preview): Plug leaks.

2000-04-09  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.[ch]: Fix problem with mouseover: Mouseover from
	last time popup was up persists if popup was last dismissed with
	Escape. 
	
	* gtk-combo-text.h (_GtkComboText): Add member to remember which
	entry widget we are caching.

	* gtk-combo-text.c (gtk_combo_text_destroy): Disconnect
	cb_pop_down.
	(cb_enter): Remember which entry widget we are caching.
	(cb_pop_down): New callback function. Forget cached entry widget.
	(gtk_combo_text_construct): Note that we're not yet caching any
	entry widget.
	(gtk_combo_text_new): Connect cb_pop_down to pop_down_done.

	* gtk-combo-box.c (gtk_combo_popup_tear_off): Add missing cast to
	kill warning.
	(gtk_combo_tearoff_bg_copy): It's not in use. #ifdef 0 it, and add
	comment about when it would be needed.
	(gtk_combo_popup_reparent): Add FIXME comment about code which
	isn't used, but will be needed.

2000-04-07  Morten Welinder  <terra@diku.dk>

	* widget-pixmap-combo.c (pixmap_combo_destroy): Unref, not destroy.

2000-04-07  Miguel de Icaza  <miguel@gnu.org>

	* widget-pixmap-combo.c (pixmap_combo_class_init): Replace
	::finalize with ::destroy.
	
	(pixmap_combo_finalize): Fix leak.
	
2000-04-06  Jody Goldberg <jgoldberg@home.com>

	* gtk-combo-text.c (cb_enter) : Only change the state if the element
	  is not already selected.
	(cb_leave) : Ditto.

2000-04-05  Jody Goldberg <jgoldberg@home.com>

	* widget-color-combo.c (color_combo_finalize) : Unref the tooltip too.

	* gtk-combo-text.c (gtk_combo_text_destroy) : New routine.
	(gtk_combo_text_class_init) : Install a destructor.

2000-03-29  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-box.h (gtk_combo_box_set_title): Declare

	* gtk-combo-box.c: Implement tearoff combo boxes.
	(struct _GtkComboBoxPrivate): New/renamed
	members: toplevel, tearoff_window: Popup's toplevel when
	torn_off/not torn off. torn_off: Tearoff status flag. Names are
	the same as in gtk/gtkmenu.c. tearable: The tearoff
	"button". popup: The widget which gets torn off. This is actually
	the event box.
	(gtk_combo_box_finalize): Destroy tearoff window.
	(gtk_combo_box_popup_hide): Turned into a wrapper which does
	nothing if popup is torn off, and calls
	gtk_combo_box_popup_hide_unconditional if it isn't.
	(gtk_combo_box_popup_hide_unconditional): Contains the logic which
	used to be in gtk_combo_box_popup_hide. If torn off, the popup is
	reattached after hiding.
	(gtk_combo_box_popup_display): Realize popup as well as toplevel.
	(gtk_combo_toggle_pressed): Use
	gtk_combo_box_popup_hide_unconditional. 
	(gtk_combo_box_key_press): New function. Dismiss popup on escape.
	(gtk_combo_box_init): Various renamings. Connect key press handler.
	(gtk_combo_get_parent_toplevel): 
	(gtk_combo_popup_tear_off): New function. Tear off the popup.
	(cb_tearable_button_release): Toggle tearoff state.
	(gtk_combo_box_construct): Make tearoff menu item no fill, no
	expand. 
	(gtk_combo_box_set_title): New function. Set a title to display
	over the tearoff window.

2000-03-26  Jody Goldberg <jgoldberg@home.com>

	* gtk-combo-text.c : Add a hash to be used for proper lookup of
	  entries made directly in the edit area.  Yes morten it leaks.
	(gtk_combo_text_construct) : Make scrolling
	  optional.
	(gtk_combo_text_add_item) : Add some brute force mouse over effects.
	  Still need autoscroll, and cancel.

2000-03-25  Jody Goldberg <jgoldberg@home.com>

	* widget-color-combo.c (color_table_setup) : Init the new custom_color data.
	(set_color) : We can set the colour to NULL.  This signifies that the
	  optional no_color is in use.  Outline the colour bar if the current is NULL.
	(cb_nocolor_clicked) : Renamed from desc_label_clicked.  This is NOT a
	  descriptive label, it is a button.
	(color_combo_finalize) : Free the custom colour.
	(cust_color_set) : Do not use static variables for things like this.

	* widget-color-combo.h (ColorCombo) : Add custom_colour and
	  custom_colour_allocated.

2000-03-24  Jody Goldberg <jgoldberg@home.com>

	* gtk-combo-text.c (gtk_combo_text_select_item) : New function.

