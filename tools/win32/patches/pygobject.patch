diff -cr configure configure
*** configure	Fri May 23 12:54:08 2008
--- configure	Thu Sep  4 14:57:17 2008
***************
*** 10441,10446 ****
--- 10441,10447 ----
  
                  { echo "$as_me:$LINENO: checking for $am_display_PYTHON script directory" >&5
  echo $ECHO_N "checking for $am_display_PYTHON script directory... $ECHO_C" >&6; }
+ am_cv_python_pythondir="${prefix}/lib/python2.5/site-packages" 2>/dev/null ||
  if test "${am_cv_python_pythondir+set}" = set; then
    echo $ECHO_N "(cached) $ECHO_C" >&6
  else
***************
*** 10481,10496 ****
  
  { echo "$as_me:$LINENO: checking for headers required to compile python extensions" >&5
  echo $ECHO_N "checking for headers required to compile python extensions... $ECHO_C" >&6; }
! py_prefix=`$PYTHON -c "import sys; print sys.prefix"`
! py_exec_prefix=`$PYTHON -c "import sys; print sys.exec_prefix"`
! if test -x "$PYTHON-config"; then
! PYTHON_INCLUDES=`$PYTHON-config --includes 2>/dev/null`
! else
! PYTHON_INCLUDES="-I${py_prefix}/include/python${PYTHON_VERSION}"
! if test "$py_prefix" != "$py_exec_prefix"; then
!   PYTHON_INCLUDES="$PYTHON_INCLUDES -I${py_exec_prefix}/include/python${PYTHON_VERSION}"
! fi
! fi
  
  save_CPPFLAGS="$CPPFLAGS"
  CPPFLAGS="$CPPFLAGS $PYTHON_INCLUDES"
--- 10482,10488 ----
  
  { echo "$as_me:$LINENO: checking for headers required to compile python extensions" >&5
  echo $ECHO_N "checking for headers required to compile python extensions... $ECHO_C" >&6; }
! PYTHON_INCLUDES="-I${PY_INCLUDE_DIR}"
  
  save_CPPFLAGS="$CPPFLAGS"
  CPPFLAGS="$CPPFLAGS $PYTHON_INCLUDES"
***************
*** 10539,10545 ****
  { echo "$as_me:$LINENO: checking for PySignal_SetWakeupFd in Python.h" >&5
  echo $ECHO_N "checking for PySignal_SetWakeupFd in Python.h... $ECHO_C" >&6; }
  py_prefix=`$PYTHON -c "import sys; print sys.prefix"`
- PYTHON_INCLUDES="-I${py_prefix}/include/python${PYTHON_VERSION}"
  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS="-Wall -Werror $PYTHON_INCLUDES"
  cat >conftest.$ac_ext <<_ACEOF
--- 10531,10536 ----
diff -cr gobject/Makefile.am gobject/Makefile.am
*** gobject/Makefile.am	Fri May 23 12:42:18 2008
--- gobject/Makefile.am	Thu Sep  4 14:50:05 2008
***************
*** 35,41 ****
  
  _gobject_la_CFLAGS = $(GLIB_CFLAGS)
  _gobject_la_LDFLAGS = $(common_ldflags) -export-symbols-regex init_gobject
! _gobject_la_LIBADD = $(GLIB_LIBS) $(FFI_LIBS)
  _gobject_la_SOURCES = \
  	gobjectmodule.c \
  	pygboxed.c \
--- 35,41 ----
  
  _gobject_la_CFLAGS = $(GLIB_CFLAGS)
  _gobject_la_LDFLAGS = $(common_ldflags) -export-symbols-regex init_gobject
! _gobject_la_LIBADD = $(GLIB_LIBS) $(FFI_LIBS) -lpython25
  _gobject_la_SOURCES = \
  	gobjectmodule.c \
  	pygboxed.c \
diff -cr tests/Makefile.am tests/Makefile.am
*** tests/Makefile.am	Fri May 23 12:42:14 2008
--- tests/Makefile.am	Thu Sep  4 14:49:37 2008
***************
*** 15,21 ****
  linked_LIBS = testhelper.la
  
  testhelper_la_LDFLAGS = -module -avoid-version
! testhelper_la_LIBADD = $(GLIB_LIBS)
  testhelper_la_SOURCES = \
  	testhelpermodule.c \
  	test-thread.c \
--- 15,21 ----
  linked_LIBS = testhelper.la
  
  testhelper_la_LDFLAGS = -module -avoid-version
! testhelper_la_LIBADD = $(GLIB_LIBS) -lpython25
  testhelper_la_SOURCES = \
  	testhelpermodule.c \
  	test-thread.c \
