2004-01-08  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=130172
	* src/func.c (function_call_with_list) : A major change
	  Do not do the empty conversion to int(0) in expr_eval
	  ALLOW scalars to return empty/NULL, the convert them to empty for
	  most types, and int(0) for float/bool.  Which makes
	  'S' the same as 's' for all purposes accept documentation.

	* src/GNOME_Gnumeric-gtk.xml : No need to name items their action is
	  sufficient as long as they are unique in their parent.

	* src/cell.h (CELL_HAS_NEW_EXPR) : AARRRGGH.  Actually a sign a
	  _unique_ value to it.

	* src/gnumeric-pane.c (cb_control_point_event) : change the cursor
	  when dragging.  Only start dragging on button 1 down.  Ignore other
	  buttons while dragging.
	(cb_sheet_object_canvas_event) : ditto.

	* src/main-application.c (main) : set the app name.

2004-01-07  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=130700
	* src/format.c (format_entry_ctor) : init the new 'suppress_minus'
	  entry.
	(format_compile) : initialize supress minus if the condition is of the
	  form [<=(val <= 0)] or [<(val < 0)] I hope this is a reasonable
	  approximation of MS Excel.
	(render_number) : pull out all the old elements that added minus signs
	(format_number) : handle the new entry based suppress minus operator
	  here, and prepend the sign.

	* src/wbcg-actions.c : Sync labels and mnemonics with the old
	  bonobo/gnomeui menus

2004-01-06  Jody Goldberg <jody@gnome.org>

	* src/wbc-gtk.c (cb_add_menus_toolbars) : Enable/Disable the arrow
	  contraction on the toolbars if the handlbox is docked/undocked.
	  This avoids having floating toolbars with nothing but the collapse
	  arrow.

	* configure.in : re-enable the *DEPRECATED*
	and add a pile of #undef/#warning to make sure things still work

2004-01-06  Jody Goldberg <jody@gnome.org>

	The initial pass at GtkAction custom combos are mucho broken
	* src/sheet.c (sheet_toggle_hide_zeros) : move this out of the macro
	  in wbcg.
	(sheet_toggle_show_formula) : ditto.

	* src/sheet-object-graph.c (cb_save_as) : add jpg, and translate the
	  error message now that string freeze is done.

	* src/gui-util.c : restore DISABLE_DEPRECATED
	(gnumeric_toolbar_insert_with_eventbox) : delete.
	(gnumeric_toolbar_append_with_eventbox) : delete.
	(gtk_button_stock_alignment_set) : delete.
	(gnumeric_toolbar_new) : delete.
	(gnumeric_inject_widget_into_bonoboui) : move the wbc-bonobo.c
	(gnumeric_toolbar_get_widget) : delete.
	(gnm_widget_disable_focus) : move here from workbook-format-toolbar.c

	* workbook-format-toolbar.{c,h} : move contents into
	* wbcg-actions.c : this new file
	* wbc-gtk.c : or this new file
	* wbc-bonobo.c : or this new file (WHICH DOES NOT COMPILE OR WORK)
	  Should probably merge into workbook-control-component or something
	  like that

	* src/gnm-marshalers.list (VOID) : Use the stock marshallers in glib
	  directly rather than adding our own wrappers.
	* src/application.c : here

	* src/GNOME_Gnumeric.xml : rename FileExit -> FileQuit to be consistent
	* src/GNOME_Gnumeric-gtk.xml : new file for GtkAction
	  NOTE NOTE NOTE
	  You must be running in gnumeric/src
	  I Repeat
	  YOU MUST BE RUNNING IN gnumeric/src
	  for anything to work right now.  I don't quite know how I want to
	  handle the file yet (the bonobo approach was irritating) we'll see.

	* configure.in :
	- Add goffice/gui-utils
	- Get rid of --with-bonobo
	- Add --with-gnome
	- Add --enable-bonobo-component
	* plugins/Makefile.am : Adapt to that.
	* src/Makefile.am : ditto, and add the new files.

2004-01-05  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=130424
	* src/commands.c (cmd_set_text_redo) : remove manual kludge.
	* src/dependent.h (cell_eval) : move from here
	* src/cell.h (cell_eval) : to here.  Add a new flag CELL_HAS_NEW_EXPR
	* src/cell.c (cell_set_expr_internal) : set the flag here.
	* src/rendered-value.c (rendered_value_new) : test it here.

	http://bugzilla.gnome.org/show_bug.cgi?id=130582
	* src/sheet-control-gui.c (scg_cursor_move) : don't scroll the other
	  panes unless we absolutely have to.  Apparently we only fuxed normal
	  cursor movement for http://bugzilla.gnome.org/show_bug.cgi?id=77303
	  This fixes rangesel too.

2003-12-29  Jody Goldberg <jody@gnome.org>

	* * : Move everything to glib/gi18n.h in place of gnumeric-i18n.h
	* gnumeric-i18n.h : delete

	* configure.in : Looks like we're really requiring gtk/glib 2.3.1 at a
	  minimum.  In reality it's probably closer to CVS at this point.  I'm
	  kinda looking forward to the gtk freeze.

2003-12-24  Morten Welinder  <terra@gnome.org>

	* src/io-context-gtk.c (cb_realize): Remove workaround for old
	gtk.
	* src/stf-parse.c (stf_parse_lines): Ditto.
	* src/workbook-control-gui.c (wbcg_get_gtk_settings): Ditto.
	(show_gui): Ditto.

	* src/gui-util.c (gdk_cursor_new_from_pixbuf): Remove.

2003-12-23  Jody Goldberg <jody@gnome.org>

	* configure.in : post BRANCH bump
	  require gtk/glib 2.3.0, that will probably go up shortly
	  as we depend more on head directly
