To report Gnumeric bugs, please visit bugzilla.gnome.org.

This file is used as a scratch pad by developers.  It is a list of known
issues that need to be addressed.  Divided into, things that will prevent
release, and longer term bugs.

Release Critical
----------------

* When we release 1.1.18, we should ask people to nominate certain foreign
  encodings as major.

* Look into octave/matlab filters

* Add a gsf-input-iconv
* Use it to handle non ascii xml from 1.0.x with no known encoding
* compartmentalize gconf support

Pending Patches
---------------

    - ?? more work on D&D based sheet reorg ?

    http://bugzilla.gnome.org/show_bug.cgi?id=84062
    - XIM menu

1.2 Targets
-----------

- validate expression names to ensure that they are not simple values (eg TRUE)

0) Misc minor UI tweaks
    0.1)  Missing toolbar borders for color and stack combos	(DONE)
    0.2)  Add keynav for autoformat canvases			(DONE)
    0.3)  Make the 'apply' behavior of the color combo optional
          so that we can do just selection.                     (DONE)
    0.4)  Add keynav for color combo                            (DONE)
    0.5)  center color combo swatches in the buttons		(DONE)
    0.6)  alpha channel support for color combos
    0.7)  Add mnemonic_activate for color combos		(DONE)
    0.8)  Add mnemonic_activate for ExprEntry			(DONE)
    0.9)  Queue update for changed/deleted in ExprEntry ?
    0.10) Menu mnemonics for Edit -> Fill -> merge & series	(DONE)
    0.11) Fix warning on destruction of torn off combo		(DONE)
    0.12) Use 'Chart' in the ui to be compatible		(DONE)
    0.13) giving focus to an expr entry with a single rangeref
    	  in another sheet should make that range visible.
    0.14) Convert dialog-consolidate to TreeView                (DONE)
    0.15) Enter ''123 in a cell and expr entry will show only   (DONE)
          one quote.

1) graphs
    1.1) Split plot xml file engine, type, and family plugins	(DONE)
    1.2) Use the registered engines to create plots		(DONE)
    1.3) XML
	1.3.1) Use libglade code parse GObject properties	(DONE)
	1.3.2) remove GdkColor from boxed type support		(DONE)
	1.3.3) Walk GogObject tree and build DOM		(DONE)
	1.3.4) Build GogObject treee from DOM			(DONE)
	1.3.5) For flagged properties store value in DOM	(DONE)
	1.3.6) Read properties from DOM				(DONE)
	1.3.7) XMLWriter interface for extra object content 	(DONE)
	1.3.8) Use it for series				(DONE)
	1.3.9) Extend GOData to support deserialization		(DONE)
	1.3.10) Implement deserialization for GnmData		(DONE)
	1.3.11) Use the XMLWriter for series for all datasets	(DONE)
	1.3.12) Persist names					(DONE)
	1.3.13) Use XMLWriter for properties of type object	(DONE)
	1.3.14) implement it for styles
	1.3.15) position
    1.4) Decide on model vs view structure			(DONE)
    1.5) 1st pass at Graph Guru					(DONE)
	1.5.1) update when someone else changes the model	(DONE)
	1.5.2) remove prop pages for deleted items		(DONE)
	1.5.3) Keep state::chart,plot safe for typeselector	(DONE)
	       in case they get deleted
    1.6) data allocator in gnumeric				(DONE)
    1.7) XLS import
	1.7.1) check overlap percentage for bars		(DONE)
	1.7.2) Add gog_object_set_position
	1.7.3) Handle 'use_one_style'				(DONE)
	1.7.4) override auto series indexing for xls
	1.7.5) styles
	1.7.6) Avoid leaking GODatas when faced with an unknown	(DONE)
	       plot type.
    1.8) data sources
	1.8.1) vector and scalar data sources from gnumeric	(DONE)
	1.8.2) static vector and scalar data sources for utils
	1.8.3) an index source
	1.8.4) Add min/max elements to vector			(DONE)
    1.9) Pie Plot
	1.9.1) Make the segments curve				(DONE)
	1.9.2) extracted segments				(DONE)
	1.9.3) Rings
	1.9.4) Radial plots
	1.9.5) extracting single wedges
	1.9.6) formating single wedges
    1.10) Bar/Col Plot						(DONE)
	1.10.1) merge bar/col stack type bools into 1 enum	(DONE)
	1.10.2) normal						(DONE)
	1.10.3) stacked						(DONE)
	1.10.4) percentage					(DONE)
	1.10.5) Skip over bars/cols when too narrow
	1.10.6) Work around bleed through with overlap 100	(DONE)
	1.10.7) Check for short vectors				(DONE)
	1.10.8) Clip when values are out of range
    1.11) Rethink GraphItem lifecyle to simplify removal	(DONE)
    1.12) Extend GogObjectRole to include more handlers		(DONE)
    1.13) Decide on recalc strategy				(DONE)
	1.13.1) Getting data from sheet -> graphs		(DONE)
	1.13.2) linking unlinking				(DONE)
    1.14) Axis management
	1.14.1) Charts/plots have axis layout type
	1.14.2) Life cycle of plots/axis to maintain connection
	1.14.3) UI for adding an axis
	1.14.4) Only permit removal of unused axes
	1.14.5) Allow a plot to select a different axis
	1.14.6) Create plot2d as base for bar/col & XY
	1.14.7) Filter add plot in guru to matching types
	1.14.8) do range allocation and filtering in chart
	    foreach axis in chart
		if (find_bound (axis, TRUE))
		    collect axis;
	    do {
		foreach axis in collection
		    if (find_bound (axis, FALSE))
			collect axis;
	    } while (collection != NULL);

    1.15) per series plot type specific data			(DONE)
    1.16) libart based render akin to guppicanvas.		(DONE)
	1.16.1) Solid background fills				(DONE)
->	    1.16.1.1) Use ArtRender interface
	1.16.2) Gradient fills (basic)				(DONE)
	    1.16.2.1) use bbox.x2-bbox.x1 + 1 for size		(DONE)
	1.16.3) Image fills					(DONE)
	    1.16.3.1) could be improved via 1.25.5
	1.16.4) path						(DONE)
->	    1.16.4.1) Use ArtRender interface
	1.16.5) text						(DONE)
	1.16.6) markers
    1.17) SheetObject editing
	1.17.1) Connect SheetObejct::user_config handler	(DONE)
	1.17.2) Create a gog_object_dup to avoid live updating
	1.17.3) Add undo/redo of full GogGraph assignment
    1.18) Extend sheet object anchor assignment to call object	(DONE)
          specfic handlers so that we can set the logical size
	  of the graph.
    1.19) Precedence
	1.19.1) Sort GogObject::children 			(DONE)
	1.19.2) Keep corresponding views in sync		(DONE)
	1.19.3) Have guru maintain order for add/remove		(DONE)
	1.19.4) api for changing order
	1.19.5) Extend Guru to support changing precedence
    1.20) GogStyle Editor page
	1.20.1) fill type
	    1.20.1.1) none					(DONE)
	    1.20.1.2) solid					(DONE)
	    1.20.1.3) basic gradients				(DONE)
	    1.20.1.4) advanced gradients via combo	{Jean Befort}
	    1.20.1.5) pixmaps fills				(DONE)
	    1.20.1.6) patterns
	1.20.2) outline line pattern
	1.20.3) font selector
	1.20.4) Add 'is auto' checkboxes
	    outline
	    fill
	    font
	1.20.5) drag destination for background images (wish)
	1.20.6) display outline distinct from outline width

    1.21) themes
	1.21.1) Actually use the themes to initialize styles	(DONE)
	1.21.2) load from xml
	1.21.3) selector for graphs
	1.21.4) How to change a graph's theme
	1.21.5) Use Roles rather than Types to enumerate
    1.22) Legend
	1.22.1) Set up cardinality framework.			(DONE)
	1.22.2) Get things to update when chart changes		(DONE)
	1.22.2) smarter layout
    1.23) Layout engine
	1.23.1) In ChartView::size_allocate use the positions	(DONE)
	1.23.2) For compass placement use the alignment flags	(DONE)
	1.23.3) support NW, NE, SW, SE				(DONE)
	1.23.4) Move ChartView::size_allocate -> GogView	(DONE)
	1.24.5) Have Graph, Chart, Legend and Axis use it
	1.23.6) Add some notion of padding
	1.23.7) remove request_valid				(DONE)
	1.23.8) pass in available space
    1.24) Sizing units
	1.24.1) Have the legend use pts to size swatches	(DONE)
	1.24.2) Test renderers mapping between pts & pixels	(DONE)
    1.25) Printing
	1.25.1) gog-renderer-gnomeprint				(DONE)
	1.25.2) sheet object wrapper for printing		(DONE)
	1.25.3) paths						(DONE)
	1.25.4) solid and empty polygons			(DONE)
	1.25.5) image filled polygons
		Jean has patch, we should cache the pixbuf as qdata.
	1.25.6) gradient filled polygons
		Jean has patch but method is qestionable
	1.25.7) measure text
	1.25.8) draw text

    1.26) Move 'use_one_style' from pie -> plot with 1 series	(DONE)
    1.27) Add a flag to gobject to go with its role indicating	(DONE)
	whether the instance was autocreated or assigned.

    questions
	- how to select a single point for formating ?

	- printing
		Looking at dia, sodipodi and paps they all seem to
		use ft2 (direct or via pango) to stroke the glyphs
		Why do we need gnome-print at all ?
		Do we need to worry about ps2 vs ps3 for gradients ?
		How to handle patterns without more access to ps ?
		Is it safe to render to ps and assume that something will translate ?

2) stf							{Andreas/Morten}
    2.1) UTF-8 cleanliness					(DONE)
    2.2) User specifiable character encoding                    (DONE)
    2.3) Replace UI for format selection                        (DONE)
    2.4) Provide an optional mechanism for specifying the
	 target location useful for text to columns, and
	 import into sheet
    2.5) A help button
    2.6) Make it possible to ignore column on import, thus      (DONE)
	 making it possible to import (parts of) files with
	 more than 256 columns.  (Think of this as a special
	 "format".)
    2.7) Create interface for line terminator selection         (DONE)
    2.8) Make listed separators locale dependent (ie translators
         should be able to define separators)		
    2.9) User specifiable locale encoding (not to be confused
         with character encoding)			        (DONE)
    2.10) Fix stf bugs                                          (DONE)
    2.11) Improve initial file preview                          (DONE)
    2.12) Hook up workbook-control-gui.c:cb_data_import_text
	Data -> External -> Import _Text File...
    2.13) Separate guessing of csv/fixed from importer.         (DONE)
    2.14) Implement format guessing.
    2.15) Put big "best guess" button on from page.
    2.16) Fix character set mess on paste                       (DONE)
    2.17) Tabs: handle optional expansion.
    2.18) Kill use of "importlines" and properly find the end.  (DONE)
    2.19) Fix locale specific parsing on paste.

3) hlinks
    3.1) Finish the edit dialog to load and store results 	(DONE)
    3.2) Figure out import semantics of the other 2 XL types
    3.3) email support ? via system 'evoltion mailto:....'

6) XL
    6.1) biff7 externsheet records in charts			(DONE)
    6.2) 97 export						(DONE)
    6.3) Check xl import of unicode names			(DONE)
    6.4) Fix export of unicode for 95 & 97			(DONE)
    6.5) Intersection, union and set export
    6.6) name export
	6.6.1) Excel 97						(DONE)
	6.6.2) Excel 95						(DONE)
	6.6.3) Excel crashes on our xl95 export of names test
    6.7) non-ole import (Nick Lamb is working on this)		(DONE)
    6.8) Validation export					(DONE)
	6.8.1) Clip ranges that are outside the sheet area	(DONE)
    6.9) autofilter export					(DONE)
	6.9.1) Add name						(DONE)
	6.9.2) autofilterinfo count				(DONE)
	6.9.3) field info in AUTOFILTER records			(DONE)
	6.9.4) combos						(DONE)
	    6.9.4.1) XL95					(DONE)
	    6.9.4.2) Escher					(DONE)
    6.10) hlink export

14) Polish up Open and Save
    14.1) merge open and import dialogs				(DONE)
    14.2) Notice mismatch between suffix and saver		(DONE)
    14.3) sort the file types by precedence and recently used
    14.4) do we want to persist recently used ?

19) Session management
    http://bugzilla.gnome.org/show_bug.cgi?id=69799
20) Change =IF back to a nodes function to handle the majority case
21) AutoFilter
    21.1)  clip size for long lists				(DONE)
    21.2)  fix mouse events for scrolled combos			(DONE)
    21.3)  race condition on start				(DONE)
    21.4)  top 10 dialog					(DONE)
    21.5)  top 10 item filters					(DONE)
    21.6)  top 10 percentage filters				(DONE)
    21.7)  blank filters					(DONE)
    21.8)  visual cue that row in part of a filter		(DONE)
    21.9)  visual cue that a field is active			(DONE)
    21.10) select the current condition in the combos		(DONE)
    21.11) expression filters					(DONE)
    21.12) expression dialog					(DONE)
    21.13) Handle range changes (cut-n-paste or ins/del col/row)(DONE)
    21.14) Handle the relationship between groups and filters	(DONE)
    21.15) xml import/export					(DONE)
    21.16) Fix cursor redraw after filter			(DONE)
    21.17) Link filters to Show All menu			(DONE)
    21.18) Have the show all action clear filter conditions	(DONE)
    21.19) Change value entries in expr dialog into combos
    21.20) editable enters for expr dialog value entries
    21.21) 2nd value in expr dialog only if 1st is active
    21.22) drag scroll for value combos
    21.23) undo/redo for creation
    21.24) undo/redo for condition set change
    21.25) Undo redo support for ins/del col/row with filters
    21.26) guess initial region if its a singleton
    21.27) combo contains start to end of continuous region
           not just the end of the selected region
    21.28) filter changes should dirty things

22) Add dirty flags to workbook too, adding a sheet should
    make workbook dirty not the new sheet.

23) gconf.
    23.1) Check for errors					(DONE)
    23.2) double check that we update on remote changes
    23.3) see if schema is installed
    23.4) Move the pref storage into app and compartmentalize
    	  the use of gconf.
    23.5) update the prefernecestructure on local changes	

24) Plugins
    24.1) enhance gobject service to do delayed load		(DONE)
    24.2) pluginize paste types
    24.3) plugin manager needs dependency tracking.  (Deactivate all
          python plugins before the python loader, for example.)

25) Audit all fixed-length buffers.  Most non-time-critical can be replaced
    by proper usage of g_strdup_printf.
    25.1)  src/*.[ch]                                           (DONE 20030110 MW)
    25.2)  plugins/applix                                       (DONE 20030409 MW)
    25.3)  plugins/corba                                        (DONE 20030408 MW)
    25.4)  plugins/derivatives                                  (DONE 20030408 MW)
    25.5)  plugins/dif                                          (DONE 20030408 MW)
    25.6)  plugins/excel
    25.7)  plugins/fn-*                                         (DONE 20030110 MW)
    25.8)  plugins/gb                                           (DONE 20030110 MW)
    25.9)  plugins/gda                                          (DONE 20030110 MW)
    25.10) plugins/gnome-glossary                               (DONE 20030408 MW)
    25.11) plugins/guile                                        (DONE 20030110 MW)
    25.12) plugins/html                                         (DONE 20030110 MW)
    25.13) plugins/lotus-123                                    (DONE 20030110 MW)
    25.14) plugins/mps                ---PROBABLY SAFE---
    25.15) plugins/numtheory                                    (DONE 20030110 MW)
    25.16) plugins/oleo                                         (DONE 20030408 MW)
    25.17) plugins/openoffice                                   (DONE 20030408 MW)
    25.18) plugins/perl                                         (DONE 20030110 MW)
    25.19) plugins/plan-perfect                                 (DONE 20030408 MW)
    25.20) plugins/psiconv              ---NOT SAFE---
    25.21) plugins/py-func                                      (DONE 20030408 MW)
    25.22) plugins/python-loader                                (DONE 20030408 MW)
    25.23) plugins/qpro                                         (DONE 20030110 MW)
    25.24) plugins/sample_datasource                            (DONE 20030110 MW)
    25.25) plugins/sc                                           (DONE 20030409 MW)
    25.26) plugins/sylk                                         (DONE 20030110 MW)
    25.27) plugins/uihello                                      (DONE 20030408 MW)
    25.28) plugins/xbase                                        (DONE 20030408 MW)
    25.29) plugins/xml_sax                                      (DONE 20030408 MW)

26) Format characterization
    26.1) Add characterization (units) to StyleFormat

27) audit all of the export plugins to handle utf8
    27.1) latex exporter                                        (DONE 20030611 AJG)
    27.2) html exporter

1.2 Targets
-----------
- insert cut
- pivot tables
- validation from list (generalize filter combos)
- clipboard handlers in plugins
- input message				(Stored)
- load/save of external references
- all the merged cell singleton bugs

- eggmenu (would be nice to slide in to support merging from non-bonobo build)
- finish corba plugin
- conditional formats : could be done if someone wanted to work on the dialog
- scripting
- undo/redo transaction file
- drawing rotated borders

Excel i/o
    - 'Forms' import.

- zip based format
    1) move existing code into plugin (easy)
    2) work on sax-ish exporter					(DONE)
    3) convert xml-sax to use gsf sax helper			(DONE)
    4) Namespace support for xml import				(DONE)
    5) Entity support in gsf
    6) writeup and discuss proposals for container
    7) writeup and discuss proposals for content

Misc stuff that should be fixed
-------------------------------

- Plugin breakage:
    - "De-activate all" should take the dependency tree into account and
      handle the python loader last.

    - When loading a function that already has a definition (such as a stub),
      we're in trouble: (a) we just overwrite the old definition in the symbol
      table, (b) both old and new owner want to remove the symbol on exit.

      We should somehow steal the old definition (and complain unless the old
      was a stub) without changing the GnmFunc address.  On exit we should
      explicitly check that it is ours to remove.

- Missing undo/redo for
    - Freeze panes (tricky this is a view attribute)
    - Duplicate sheet.
    - Remove sheet. This raises some serious design issues: We are refering to
      sheets within most commands by sheet address, that will change on 
      remove/undo
    - Goal seek.
    - Tabulate.
    - Sheet object configuration changes.
    - Sheet object creation                (Isn't this already done ?)
    - Workbook attr changes
    - Fill->series
    - Data->Text to columns

- cols/rows
    : Make unhide smarter to find hidden regions on either side of
      selected ranges.
    : drag based col/row resize should support negative sizes to
      correspond to hiding.

- We need to somehow add --export-dynamic to the gnumeric link line, or else
  plugins won't load on Solaris/gcc.  (This might just be my bastard libtool.)

- Remove duplication of code between analysis-tools.c and collect.c

- Make deletion work for multiple ranges.

- autoformat
    - leaking styles when an edge is disabled
    - consider either using the users data as a sample, or at least making the
      sample adaptive based on which edges are disabled.

- The autocalc label should use a more readable format and should not get
  clipped.

- Names
    : references in names do not get changed with cut/paste or ins/del row/col.
      How to handle relative references in names ?? here.
    : Dialog
	* We should start with the expr entry set to either the current cell,
	  or by selecting the first named expression in scope that contains the
	  current cell.
    : Check scoping changes.						(DONE)
    : Is there such a thing as an array formula in a name ?
    : Handle pasting an expression with an un-qualified sheet local name into
      another sheet

- clean up the range_list codes to differentiate a list of ranges from a list
  of cellranges.

- In selected regions the borders of cells that
  have their background color set are drawn incorrectly.
  An off-by-one pixel problem. For details see :
  http://bugzilla.gnome.org/show_bug.cgi?id=52240

- The max row/col canvas scroll size is still hard coded.

- Formats
    : Why does the number matching bother comparing against formats that are
      covered by 'General' ?
    : format.c: we should resolve all the separators at gnumeric_setlocale time,
      not every time we need them.
    : When applying a currency symbol we need to store the NON-localized id.
    : hour month and year format strings need to be internationalized.
	eg tt:ss instead of hh:ss for other locales.
    : formats with AM/PM need to be internationalized.
    : we should parse fractions
    : We do not format fractional seconds correctly.
    : Parsing should handle embedded strings
    : It incorrectly accepts mmm:ss as some sort of minute spec.

- let's add simple commands like inc/dec font size and things like that.

- Support parsing and displaying locale specific function names.

- Auto resize needs to handle empty cells.

- auto-fill does not resize row/col

- Styles
    : improve uniform_get to handle full sheet more quickly.
    : Borders
	* use new border code for cell format dialog (possibly preview-grid)

- SheetObjects
    : SheetView specific objects
    : Add acetate_create virtual to handle shaped objects.
    : Other anchor types for sheet objects
    : Add keyboard controls for the control points
    : Add object control for resize to disable invalid sizes.
    : Add 'is_printable' flag and import
    : Add 'move_with_cells' flag					(DONE)
    : Add ability to fix aspect ratio of drag resize
    : Honour rubber_band_directly during resize too
    : research the other xl object flags.
    : remove update_view_bounds and have the model emit a bound_changed signal
    : double click to bring up prefs dialog
    : selecting object with other objects on top of it should hide them while
      editing

Dialogs
-------
- Formula Guru
    : Fix keyboard interface

Function Breakage
-----------------
- Function range_min_k uses an O(n*log n) algorithm.  It should use O(n)
  algorithm, see Knuth.
- WORKDAY	Add holiday support

* Convert the code from sc to use our more accurate date routines
- ODDFPRICE	(test fails)
- ODDFYIELD
- ODDLPRICE	(test fails)
- ODDLYIELD	(test fails)
- YIELDDISC	(basis 1 seems different)

Printing
--------
- cell text wraps differently when printing than displaying due to scaling
  differences in font size.  do we want to eliminate this ?

Plugins
-------
- i18n support for third-party plugins.
- Add extra info (authors, etc.) to XML file.
- Beautify ErrorInfo dialog (it's ugly).
- Mark plugin as "broken" if deactivation failed.
- mps
    : has some fixed-length arrays that can be overrun.
    : creates formulae by making strings and then parsing them.
      (Wasteful and won't work in non-C locales.)

Clipboard
---------
- Fall back to string import when incoming html and OpenOffice doesn't
  contain tables.                                               (DONE)
- May be not export html as table when just one cell is selected.

--------------------------------------------------------------------------------
Finished

4) finish support for h/v only splits				(DONE)
7) Expr Parser                                                  (DONE)
    7.1) Move the host of flags into an GnmExprConventions      (DONE)
    7.2) Use conventions obj to generate strings		(DONE)
8) Reinstate auto-format					(DONE)
    8.1) Move type information to function flags.		(DONE)
    8.2) Change commands to infer types.			(DONE)
9) Manual recalc						(DONE)
    9.1) finish calculation ui in workbook attr dialog		(DONE)
10) fix highlighting of completion code				(DONE)
11) Use the default gtk font rather than our own		(DONE)
12) audit all of the import plugins to do UTF-8 conversions     (DONE)
    12.1)  excel						(DONE)
    12.2)  applix						(DONE)
    12.3)  lotus						(DONE)
    12.4)  quattro pro                                          (DONE)
    12.5)  plan perfect						(DONE)
    12.6)  html							(DONE)
    12.7)  opencalc						(DONE)
    12.8)  oleo                                                 (DONE)
    12.9)  sc                                                   (DONE)
    12.10) sylk                                                 (DONE)
    12.11) dif                                                  (DONE)
    12.12) psion                                                (DONE)
13) export plugins use gsf					(DONE)
15) Decide whether to turn on the poor man's UTF-8 regexps.     (DONE)
16) Outline mode						(DONE)
    16.1) optionally put markers above/left			(DONE)
    16.2) smarter handling for groups at the edge of selection	(DONE)
    16.3) implement 'clicked' for numbers callbacks		(DONE)
17) 3D reference fixes on sheet deletion			(DONE)
18) 'discard' for invalid expressions enters text as string	(DONE)
23) Bonobo component						(DONE)
    23.1) Install it in libexec					(DONE)
    23.2) Investigate warnings 					(DONE)
