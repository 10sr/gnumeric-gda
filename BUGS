To report Gnumeric bugs, please visit bugzilla.gnome.org.

This file is used as a scratch pad by developers.  It is a list of known
issues that need to be addressed.  Divided into, things that will prevent
release, and longer term bugs.

Release Critical
----------------

Pending Patches
---------------
    - ?? more work on D&D based sheet reorg ?

    http://bugzilla.gnome.org/show_bug.cgi?id=84062
    - XIM menu

    http://bugzilla.gnome.org/show_bug.cgi?id=67822
    - Fit-to printing

1.2 Targets
-----------

- Put a pango layout in rendered value ('snappiness')
- height calculation in render value is hosed for embedded new lines
- validate expression names to ensure that they are not simple values (eg TRUE)

1) graphs							{Jody}
2) stf								{Andreas}
    2.1) UTF-8 cleanliness
    2.2) User specifiable character encoding
    2.3) Replace UI for format selection
    2.4) Provide an optional mechanism for specifying the target location
         useful for text to columns, and import into sheet
    2.5) A help button

3) hlinks
    3.1) Finish the edit dialog to load and store results (easy project)
    3.2) Figure out import semantics of the other 2 XL types

5) zip based format
    5.1) move existing code into plugin (depends on 7)
    5.2) work on sax-ish exporter
    5.3) convert xml-sax to use gsf sax helper
    5.3) extend format api to contain opencalc flags.
    5.4) Autocolors Export/import them to/from gnumeric format.
    5.5) it would be nice to store custom colours too
    5.6) merge the myriad bits of layout into 1
    5.7) Evaluate change to styles, formats and fonts to
         predeclare then associate with a range.

6) XL
    6.1) biff7 externsheet records in charts			(DONE)
    6.2) 97 export						(DONE)
    6.3) Check xl import of unicode names			(DONE)
    6.4) Fix export of unicode for 95 & 97			(DONE)
    6.5) Intersection, union and set export
    6.6) name export
	6.6.1) Excel 97						(DONE)
	6.6.2) Excel 95						(DONE)
	6.6.3) Excel crashes on our xl95 export of names test
    6.7) non-ole import (Nick Lamb is working on this)		(DONE)
    6.8) Validation export					(DONE)
	6.8.1) Clip ranges that are outside the sheet area	(DONE)
    6.9) autofilter export					(DONE)
	6.9.1) Add name						(DONE)
	6.9.2) autofilterinfo count				(DONE)
	6.9.3) field info in AUTOFILTER records			(DONE)
	6.9.4) combos						(DONE)
	    6.9.4.1) XL95					(DONE)
	    6.9.4.2) Escher					(DONE)
    6.10) hlink export

8) Reinstate auto-format
    8.1) Add characterization (units) to StyleFormat
    8.2) Move type information to function flags.		(DONE)
    8.3) Change commands to infer types.

13) export plugins
    13.1) Use gsf						(DONE)
    13.2) UTF-8 -> ??

14) Polish up Open and Save
    14.1) merge open and import dialogs				(DONE)
    14.2) Notice mismatch between suffix and saver		(DONE)
    14.3) sort the file types by precedence and recently used
    14.4) do we want to persist recently used ?

19) Session management
    http://bugzilla.gnome.org/show_bug.cgi?id=69799
20) Change =IF back to a nodes function to handle the majority case
21) AutoFilter
    21.1)  clip size for long lists				(DONE)
    21.2)  fix mouse events for scrolled combos			(DONE)
    21.3)  race condition on start				(DONE)
    21.4)  top 10 dialog					(DONE)
    21.5)  top 10 item filters					(DONE)
    21.6)  top 10 percentage filters				(DONE)
    21.7)  blank filters					(DONE)
    21.8)  visual cue that row in part of a filter		(DONE)
    21.9)  visual cue that a field is active			(DONE)
    21.10) select the current condition in the combos		(DONE)
    21.11) expression filters					(DONE)
    21.12) expression dialog					(DONE)
    21.13) Handle range changes (cut-n-paste or ins/del col/row)
    21.14) Handle the relationship between groups and filters	(DONE)
    21.15) xml import/export					(DONE)
    21.16) Fix cursor redraw after filter			(DONE)
    21.17) Link filters to Show All menu			(DONE)
    21.18) Have the show all action clear filter conditions	(DONE)
    21.19) Change value entries in expr dialog into combos
    21.20) editable enters for expr dialog value entries
    21.21) 2nd value in expr dialog only if 1st is active
    21.22) drag scroll for value combos
    21.23) undo/redo for creation
    21.24) undo/redo for condition set change
    21.25) guess initial region if its a singleton
    21.26) combo contains start to end of continuous region
           not just the end of the selected region
    21.27) filter changes should dirty things

22) Add dirty flags to workbook too, adding a sheet should
    make workbook dirty not the new sheet.

Functions
    ODDFPRICE	(test fails)
    ODDFYEILD	(unimplementeD)
    YIELDDISC	(test fails by alot)
    openoffice/scaddins/source/analysis/analysishelper.cxx
    has copies of these.  Although the code looks simplistic
    Need to read the docs
	ODDLPRICE	(test fails, so does OO)
	ODDLYEILD	(test fails, so does OO)

UTF-8:
    - Window titles.
    - format precompile

Possibly Post 1.2 Targets
-------------------------
- insert cut
- pivot tables
- validation from list (generalize filter combos)
- clipboard handlers in plugins
- input message				(Stored)
- load/save of external references
- all the merged cell singleton bugs

Probably Post 1.2 Targets
-------------------------
- eggmenu (would be nice to slide in to support merging from non-bonobo build)
- finish corba plugin
- conditional formats : could be done if someone wanted to work on the dialog
- scripting
- undo/redo transaction file
- drawing rotated borders

Excel i/o
    - 'Forms' import.

Misc stuff that should be fixed
-------------------------------

- Missing undo/redo for
    - Freeze panes (tricky this is a view attribute)
    - Duplicate sheet.
    - Remove sheet. This raises some serious design issues.
    - Goal seek.
    - Tabulate.
    - Sheet object configuration changes.
    - Sheet object creation
    - Workbook attr changes

- Evaluate mathfunc.c's use of gamma and lgamma.  We use the libc lgamma
  (probably ok) and have gamma(x)=exp(lgamma(x)) (questionable).
- We need to somehow add --export-dynamic to the gnumeric link line, or else
  plugins won't load on Solaris/gcc.  (This might just be my bastard libtool.)

- Remove duplication of code between analysis-tools.c and collect.c

- Make deletion work for multiple ranges.

- Audit all fixed-length buffers.  Most non-time-critical can be replaced
  by proper usage of g_strdup_printf.

- The autocalc label should use a more readable format and should not get
  clipped.

- Names
    : references in names do not get changed with cut/paste or ins/del row/col.
      How to handle relative references in names ?? here.
    : Dialog
	* We should start with the expr entry set to either the current cell,
	  or by selecting the first named expression in scope that contains the
	  current cell.
    : Check scoping changes.
    : Is there such a thing as an array formula in a name ?
    : Handle pasting an expression with an un-qualified sheet local name into
      another sheet

- hidden rows/cols
    : Make unhide smarter to find hidden regions on either side of selected ranges.

- clean up the range_list codes to differentiate a list of ranges from a list
  of cellranges.

- In selected regions the borders of cells that
  have their background color set are drawn incorrectly.
  An off-by-one pixel problem. For details see :
  http://bugzilla.gnome.org/show_bug.cgi?id=52240

- The max row/col canvas scroll size is still hard coded.

- Formats
    : support negative durations with [h]
    : Why does the number matching bother comparing against formats that are
      covered by 'General' ?
    : format.c: we should resolve all the separators at gnumeric_setlocale time,
      not every time we need them.
    : When applying a currency symbol we need to store the NON-localized id.
    : hour month and year format strings need to be internationalized.
	eg tt:ss instead of hh:ss for other locales.
    : formats with AM/PM need to be internationalized.
    : we should parse fractions
    : We do not format fractional seconds correctly.
    : Parsing should handle embedded strings
    : It incorrectly accepts mmm:ss as some sort of minute spec.

- let's add simple commands like inc/dec font size and things like that.

- locale : Saving xml should not rely on changing the textdomain to
           disable translation of TRUE/FALSE in expressions.
	 : Support parsing and displaying locale specific function
	   names.

- Auto resize needs to handle empty cells.

- auto-fill does not resize row/col

- Styles
    : improve uniform_get to handle full sheet more quickly.
    : Borders
	* use new border code for cell format dialog (possibly preview-grid)

- SheetObjects
    : Add acetate_create virtual to handle shaped objects.
    : Other anchor types for sheet objects
    : Add keyboard controls for the control points
    : Add object control for resize to disable invalid sizes.
    : Add 'is_printable' flag and import
    : Add ability to fix aspect ratio of drag resize
    : research the other xl object flags.

Dialogs
-------
- Formula Guru
    : Fix keyboard interface

Function Breakage
-----------------
- Function range_min_k uses an O(n*log n) algorithm.  It should use O(n)
  algorithm, see Knuth.
- Functions like SUMPRODUCT need to have better support for sparse ranges.
  We should probably create synchronously_walk_ranges.  (XL goes kaboom on
  large ranges also, but we ought to be smarter.)

Printing
--------
- cell text wraps differently when printing than displaying due to scaling
  differences in font size.  do we want to eliminate this ?

Plugins
-------
- i18n support for third-party plugins.
- Add extra info (authors, etc.) to XML file.
- Beautify ErrorInfo dialog (it's ugly).
- Mark plugin as "broken" if deactivation failed.
- mps
    : has some fixed-length arrays that can be overrun.
    : creates formulae by making strings and then parsing them.
      (Wasteful and won't work in non-C locales.)

--------------------------------------------------------------------------------
Finished

4) finish support for h/v only splits				(DONE)
7) Expr Parser                                                  (DONE)
    7.1) Move the host of flags into an GnmExprConventions      (DONE)
    7.2) Use conventions obj to generate strings		(DONE)
9) Manual recalc						(DONE)
    9.1) finish calculation ui in workbook attr dialog		(DONE)
10) fix highlighting of completion code				(DONE)
11) Use the default gtk font rather than our own		(DONE)
12) audit all of the import plugins to do UTF-8 conversions     (DONE)
    12.1)  excel						(DONE)
    12.2)  applix						(DONE)
    12.3)  lotus						(DONE)
    12.4)  quattro pro                                          (DONE)
    12.5)  plan perfect						(DONE)
    12.6)  html							(DONE)
    12.7)  opencalc						(DONE)
    12.8)  oleo                                                 (DONE)
    12.9)  sc                                                   (DONE)
    12.10) sylk                                                 (DONE)
    12.11) dif                                                  (DONE)
    12.12) psion                                                (DONE)
15) Decide whether to turn on the poor man's UTF-8 regexps.     (DONE)
16) Outline mode						(DONE)
    16.1) optionally put markers above/left			(DONE)
    16.2) smarter handling for groups at the edge of selection	(DONE)
    16.3) implement 'clicked' for numbers callbacks		(DONE)
17) 3D reference fixes on sheet deletion			(DONE)
18) 'discard' for invalid expressions enters text as string	(DONE)
23) Bonobo component						(DONE)
    23.1) Install it in libexec					(DONE)
    23.2) Investigate warnings 					(DONE)

